{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Budgets=()=>{const[budgets,setBudgets]=useState([]);const[newBudget,setNewBudget]=useState({Category:'',Amount:'',StartDate:'',EndDate:''});const[successMessage,setSuccessMessage]=useState('');const[errorMessage,setErrorMessage]=useState('');const handleInputChange=e=>{const{name,value}=e.target;setNewBudget({...newBudget,[name]:value});};const handleSubmit=async e=>{e.preventDefault();try{const payload={Category:newBudget.Category,Amount:newBudget.Amount,StartDate:newBudget.StartDate,EndDate:newBudget.EndDate};if(!payload.Amount||payload.Amount===0){console.error('Amount cannot be empty or zero');return;}const response=await fetch('/budgets',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(payload)});if(response.ok){const addedBudget=await response.json();setBudgets([...budgets,addedBudget]);setSuccessMessage('Budget successfully added!');setNewBudget({Category:'',Amount:'',StartDate:'',EndDate:''});console.log('Budget created successfully!');}else{console.error('Failed to create budget:',response.statusText);}}catch(error){console.error('An error occurred:',error);setErrorMessage('An error occurred while adding the budget. Please try again later.');}};useEffect(()=>{fetch('/budgets').then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(data=>{if(!data||!Array.isArray(data)){throw new Error('Invalid response format');}const formattedBudgets=data.map(budget=>({Category:budget.Category,Amount:budget.Amount,StartDate:budget.StartDate.strftime('%m-%d-%Y'),EndDate:budget.EndDate.strftime('%m-%d-%Y')}));setBudgets(formattedBudgets);}).catch(error=>console.error('Error fetching budgets:',error));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Budgets\"}),successMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"budget-form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Category:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Category\",value:newBudget.Category,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Amount:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"Amount\",value:newBudget.Amount,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Start Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"StartDate\",value:newBudget.StartDate,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"End Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"EndDate\",value:newBudget.EndDate,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Budget\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"budget-list\",children:budgets.map(budget=>/*#__PURE__*/_jsxs(\"li\",{className:\"budget-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:budget.Category}),\" - \",budget.Amount,\" USD\",/*#__PURE__*/_jsx(\"br\",{}),\"Start Date: \",new Date(budget.StartDate).toLocaleDateString(),\", End Date: \",new Date(budget.EndDate).toLocaleDateString()]},budget.BudgetID))})]});};export default Budgets;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Budgets","budgets","setBudgets","newBudget","setNewBudget","Category","Amount","StartDate","EndDate","successMessage","setSuccessMessage","errorMessage","setErrorMessage","handleInputChange","e","name","value","target","handleSubmit","preventDefault","payload","console","error","response","fetch","method","headers","credentials","body","JSON","stringify","ok","addedBudget","json","log","statusText","then","Error","data","Array","isArray","formattedBudgets","map","budget","strftime","catch","className","children","style","color","onSubmit","type","onChange","Date","toLocaleDateString","BudgetID"],"sources":["/home/grace/projects/maya_prac/alx_project1/finance_tracker/react_frontend/src/components/Budgets.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './styles.css';\nconst Budgets = () => {\n  const [budgets, setBudgets] = useState([]);\n  const [newBudget, setNewBudget] = useState({\n    Category: '',\n    Amount: '',\n    StartDate: '',\n    EndDate: '',\n  });\n\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setNewBudget({ ...newBudget, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n\t  const payload = {\n            Category: newBudget.Category,\n            Amount: newBudget.Amount,\n\t    StartDate: newBudget.StartDate,\n\t    EndDate: newBudget.EndDate,\n        };\n\tif (!payload.Amount || payload.Amount === 0) {\n          console.error('Amount cannot be empty or zero');\n\t  return;\n    }\n\t  const response = await fetch('/budgets', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tcredentials:'include',\n\t\tbody: JSON.stringify(payload),\n\t});\n\tif (response.ok) {\n\t  const addedBudget = await response.json();\n\t  setBudgets([...budgets, addedBudget]);\n\t  setSuccessMessage('Budget successfully added!');\n          setNewBudget({\n            Category: '',\n            Amount: '',\n            StartDate: '',\n            EndDate: '',\n        });\n\t  console.log('Budget created successfully!');\n\t} else {\n\t\tconsole.error('Failed to create budget:', response.statusText);\n\t}\n    } catch (error) {\n\t    console.error('An error occurred:', error);\n\t    setErrorMessage('An error occurred while adding the budget. Please try again later.');\n    }\n  };\n\n  useEffect(() => {\n  fetch('/budgets')\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (!data || !Array.isArray(data)) {\n\tthrow new Error('Invalid response format');\n      }\n      const formattedBudgets = data.map(budget => ({\n      Category: budget.Category,\n      Amount: budget.Amount,\n      StartDate: budget.StartDate.strftime('%m-%d-%Y'),\n      EndDate: budget.EndDate.strftime('%m-%d-%Y'),\n  }));\n  setBudgets(formattedBudgets);\n      })\n    .catch(error => console.error('Error fetching budgets:', error));\n}, []);\n  return (\n    <div className=\"section\">\n      <h2>Budgets</h2>\n      {successMessage && <p style={{ color: 'green' }}>{successMessage}</p>}\n      {errorMessage && <p style={{ color: 'red' }}>{errorMessage}</p>}\n      <form onSubmit={handleSubmit} className=\"budget-form\">\n        <label>\n          Category:\n          <input\n            type=\"text\"\n            name=\"Category\"\n            value={newBudget.Category}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          Amount:\n          <input\n            type=\"number\"\n            name=\"Amount\"\n            value={newBudget.Amount}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          Start Date:\n          <input\n            type=\"date\"\n            name=\"StartDate\"\n            value={newBudget.StartDate}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          End Date:\n          <input\n            type=\"date\"\n            name=\"EndDate\"\n            value={newBudget.EndDate}\n            onChange={handleInputChange}\n          />\n        </label>\n        <button type=\"submit\">Add Budget</button>\n      </form>\n      <ul className=\"budget-list\">\n        {budgets.map((budget) => (\n          <li key={budget.BudgetID} className=\"budget-item\">\n            <strong>{budget.Category}</strong> - {budget.Amount} USD\n\t    <br />\n\t    Start Date: {new Date(budget.StartDate).toLocaleDateString()}, End Date: {new Date(budget.EndDate).toLocaleDateString()}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Budgets;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}